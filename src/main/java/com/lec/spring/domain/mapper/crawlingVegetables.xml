<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="com.lec.spring.crawling.Seoha_DAO">

	<insert id="insert" flushCache="true" 
		parameterType="com.lec.spring.crawling.VegetablesDTO"
		keyProperty="pro_uid" useGeneratedKeys="true" keyColumn="pro_uid">
		INSERT INTO ic_product
		(pro_name, pro_price, pro_img, pro_kind, pro_content)
		VALUES
		(#{pro_name}, #{pro_price}, #{pro_img}, "채소", #{pro_content})
	</insert>
	
	<select id="select" resultType="com.lec.spring.crawling.VegetablesDTO">
		SELECT 
			pro_uid, 
			pro_name, 
			pro_price, 
			pro_img, 
			pro_content
		FROM 
			ic_product
		WHERE
			pro_kind = "채소" 		
	</select>
	
	<!-- 장바구니에 넣기 -->
	<select id="select1" resultType="com.lec.spring.domain.BasketListDTO">
	SELECT b_uid,
		b_proName,
		b_img,
		b_price,
		b_qty,
		m_uid,
		pro_uid
	 FROM ic_basket
	</select>
	
	<!-- 장바구니에서 삭제 -->
	<delete id="deleteByUid" flushCache="true">
		DELETE FROM ic_basket WHERE b_uid = #{uid}
	</delete>
	
	<!-- 주문하기 추가 -->
	<insert id="insertOrder" flushCache="true"
		parameterType="com.lec.spring.domain.OrderDTO"
		keyProperty="o_uid" useGeneratedKeys="true" keyColumn="o_uid">	
		INSERT INTO ic_order
			(o_qty, o_name, o_price, m_uid, b_uid)
		VALUES
			(#{o_qty}, #{o_name}, #{o_price}, #{m_uid}, #{b_uid})
	</insert>
	

</mapper>


	